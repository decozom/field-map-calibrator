Field Timer / Field Calibrator 運用README（完成版）

このREADMEは Field Calibrator と Field Timer の連携方法をまとめたもの。
コード・設定・運用ルールをすべてここに集約する。

==================================================
【全体構成】
==================================================

・Field Calibrator
  フィールド画像に対して GPS 基準点（anchors）を作成するツール

・Field Timer
  キャリブレーション済み JSON を読み込み、
  GPS位置をマップ上に表示する実運用用ツール

重要：
マップの枠サイズ・位置・基準は
Calibrator と Timer で完全一致させる前提。

==================================================
【ディレクトリ構成（想定）】
==================================================

field-timer/
 ├─ fields/
 │   ├─ fields.json
 │   └─ oasis.json
 └─ assets/
     └─ oasis.jpg

field-calibrator/
 ├─ maps/
 │   ├─ oasis.jpg
 │   └─ manifest.json

==================================================
【キャリブレーターの使い方】
==================================================

1. maps/ フォルダにフィールド画像を入れる
2. manifest.json に画像ファイル名を追加
3. キャリブレーターを起動
4. 画像選択アイコンからマップを選択
5. P0〜P3 のピンを同一地形上の4点に合わせる
6. 各ピンに対応する lat / lon を入力
7. 画像倍率を調整（見やすさ優先）
8. キャリブレーション結果を JSON としてコピー

==================================================
【キャリブレーター出力 JSON 形式】
==================================================

{
  "id": "oasis",
  "name": "oasis",
  "image": "assets/oasis.jpg",
  "defaultImgScale": 0.35,
  "anchors": [
    { "label": "P0", "x": 65.0,  "y": 74.0,  "lat": 35.865547, "lon": 139.473143 },
    { "label": "P1", "x": 279.0, "y": 35.0,  "lat": 35.865833, "lon": 139.473529 },
    { "label": "P2", "x": 266.0, "y": 285.0, "lat": 35.865175, "lon": 139.474076 },
    { "label": "P3", "x": 90.0,  "y": 311.0, "lat": 35.864925, "lon": 139.473733 }
  ]
}

--------------------------------------------------
各キーの意味
--------------------------------------------------

id
  フィールド識別子

name
  表示名

image
  Field Timer 側で使用する画像パス

defaultImgScale
  Field Timer 初期表示倍率（見た目専用）

anchors
  GPS → マップ変換用の4点（必須）

==================================================
【Field Timer への反映手順】
==================================================

1. キャリブレーターで作成した JSON を
   field-timer/fields/ に配置

2. マップ画像を
   field-timer/assets/ に配置

3. fields/fields.json に追加

例：

[
  { "name": "oasis", "file": "oasis.json" }
]

4. Field Timer を起動
5. フィールド選択 → 即反映

==================================================
【defaultImgScale の扱い（重要）】
==================================================

・Field Timer のコードに直接書かない
・必ずフィールド JSON に記述する
・Timer 側は自動で読み込む

Timer 側処理（参考）：

document.documentElement.style.setProperty(
  "--imgScale",
  String(data.defaultImgScale ?? 1.0)
);

--------------------------------------------------
挙動
--------------------------------------------------

defaultImgScale がある場合
  指定倍率で初期表示

defaultImgScale が無い場合
  1.0倍で初期表示

※ GPS計算・座標変換には一切影響しない
※ 見た目調整専用

==================================================
【重要な運用ルール】
==================================================

・キャリブレーターは「設定を作るだけ」
・Field Timer は「JSONを読むだけ」
・Timer 側にフィールド固有値を書かない
・再キャリブ時は JSON を差し替えるだけ

==================================================
【備考】
==================================================

・端末ごとの画面サイズ差は考慮済み
・anchors はマップ枠基準の px 座標
・Timer / Calibrator でマップ枠が一致している限りズレない

この README はそのままコピーして使用すること。